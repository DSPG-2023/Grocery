---
title: "Harun_Markdown"
author: "Harun"
date: "2023-06-02"
output: html_document
---

```{r}
library(googleway)
library(sf)
library(dplyr)
library(ggplot2)
library(leaflet)
library(ggvoronoi)
```

```{r, include=FALSE}
key <- Sys.getenv("PLACES_KEY")
set_key(key = key)
```

```{r}
# Trying to find dollar stores in a 4 mile radius.

ames_dollar_stores <- google_places(search_string = "dollar", location = c(42.034534, -93.620369), radius = 6500, keyword = "store")
```

```{r}
results <- ames_dollar_stores$results

spatial_results <- results %>% 
  transmute(name = name, lat = geometry$location$lat, lng = geometry$location$lng)
```

```{r}
ggplot(spatial_results, aes(lat, lng)) +
  stat_voronoi(geom = "path") +
  geom_point(mapping = aes(lat, lng))
```


```{r}
leaflet(spatial_results) %>%
  addProviderTiles("CartoDB.Positron") %>%
  addMarkers(lng = spatial_results$lng, lat = spatial_results$lat, popup = spatial_results$name) %>%
  setView(-98.5795, 39.8282, zoom=3)
```


